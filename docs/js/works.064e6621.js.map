{"version":3,"file":"js/works.064e6621.js","mappings":"sLACQA,MAAM,a,GAQJA,MAAM,6BAA6BC,MAAA,gB,GAClCD,MAAM,S,6EATfE,EAAAA,EAAAA,IAaO,OAbPC,EAaO,cAZLC,EAAAA,EAAAA,IAKM,OAJJJ,MAAM,2BACNC,MAAA,gEACD,SAED,mBACAC,EAAAA,EAAAA,IAKMG,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAL6BC,EAAAC,aAAY,EAAjCC,EAAMC,O,WAApBR,EAAAA,EAAAA,IAKM,OAL4CS,IAAKF,EAAMT,MAAM,Q,EACjEI,EAAAA,EAAAA,IAA2E,KAA3EQ,GAA2EC,EAAAA,EAAAA,IAAZJ,GAAI,IACnEL,EAAAA,EAAAA,IAEM,MAFNU,EAEM,EADJC,EAAAA,EAAAA,IAAgDC,EAAA,CAA/BC,MAAOP,EAAYQ,IAAKC,EAAAD,K,2EAWjD,GACEE,IAAAA,GACE,MAAO,CACLC,UAAW,GACXJ,MAAO,GACPC,IAAK,KAET,EACAI,SAAU,CACRd,YAAAA,GACE,MAAMe,EAAS,CAAC,EAShB,OARAC,KAAKP,MAAMQ,QAAQC,IACjB,IAAIjB,EAAOiB,EAAKC,KAAKC,UAAU,EAAG,GACrB,SAATnB,IAAiBA,EAAO,OACvBc,EAAOd,KAAOc,EAAOd,GAAQ,IAClCc,EAAOd,GAAMoB,KAAKH,KAIbI,OAAOC,QAAQR,GACnBS,KAAK,EAAEC,IAAKC,KACD,QAAND,EAAoB,EACd,QAANC,GAAqB,EAClBC,SAASD,GAAKC,SAASF,GAEpC,GAEFG,QAAS,CACPC,YAAa,WAEXb,KAAKP,MAAQ,GACb,IAAK,MAAMS,KAAQF,KAAKH,WAElBK,EAAKR,IAAIoB,SAASd,KAAKN,MAAoB,MAAZM,KAAKN,MAAaM,KAAKP,MAAMY,KAAKH,EAEzE,GAEFa,MAAO,CACLC,OAAQ,SAAUC,EAAQC,GACpBD,IAAWC,GACblB,KAAKN,IAAMM,KAAKgB,OAAOG,MAAMzB,IAC7BM,KAAKa,eAELb,KAAKa,aAET,GAEFO,OAAAA,GACEpB,KAAKN,IAAMM,KAAKgB,OAAOG,MAAMzB,IAC7B2B,MAAM,yBACHC,KAAMC,GACEA,EAASC,QAEjBF,KAAM1B,IACL,MAAM6B,EAAW,GACjB,IAAK,IAAIC,EAAI9B,EAAK+B,KAAMD,GAAK9B,EAAKgC,GAAIF,IACpCD,EAASpB,KACPgB,MAAM,UAAUK,UACbJ,KAAMC,GAAaA,EAASC,SAInCK,QAAQC,IAAIL,GAAUH,KAAMS,IAC1B/B,KAAKH,UAAYkC,EAASvB,KAAK,CAACC,EAAGC,KACjC,MAAMsB,EAAQ,IAAIC,KAAKxB,EAAEN,KAAK+B,QAAQ,MAAO,KAAKA,QAAQ,IAAK,MACzDC,EAAQ,IAAIF,KAAKvB,EAAEP,KAAK+B,QAAQ,MAAO,KAAKA,QAAQ,IAAK,MAC/D,OAAOC,EAAQH,IAEjBhC,KAAKa,iBAGb,EACAuB,WAAY,CACVC,eAAcA,EAAAA,I,UC1FlB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://i-icc/./src/views/WorksView.vue","webpack://i-icc/./src/views/WorksView.vue?fd89"],"sourcesContent":["<template>\r\n  <main class=\"container\">\r\n    <div\r\n      class=\"text-lg-center mb-4 mt-2\"\r\n      style=\"font-size: 4rem; font-family: 'Kosugi Maru', sans-serif\"\r\n    >\r\n      制作物\r\n    </div>\r\n    <div v-for=\"([year, yearGroup]) in groupedWorks\" :key=\"year\" class=\"mb-5\">\r\n      <h2 class=\"display-5 mb-3 text-center\" style=\"color: #666;\">{{ year }}</h2>\r\n      <div class=\"works\">\r\n        <WorksComponent :works=\"yearGroup\" :tag=\"tag\" />\r\n      </div>\r\n    </div>\r\n  </main>\r\n</template>\r\n\r\n<script>\r\nimport WorksComponent from \"@/components/WorksComponent.vue\";\r\n\r\nimport \"../../public/css/works.css\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      all_works: [],\r\n      works: [],\r\n      tag: null,\r\n    };\r\n  },\r\n  computed: {\r\n    groupedWorks() {\r\n      const groups = {};\r\n      this.works.forEach(work => {\r\n        let year = work.date.substring(0, 4);\r\n        if (year === '????') year = '年不明';\r\n        if (!groups[year]) groups[year] = [];\r\n        groups[year].push(work);\r\n      });\r\n\r\n      // 配列で返すことで順序を保証\r\n      return Object.entries(groups)\r\n        .sort(([a], [b]) => {\r\n          if (a === '年不明') return 1;\r\n          if (b === '年不明') return -1;\r\n          return parseInt(b) - parseInt(a); // 新しい年が上\r\n        });\r\n    }\r\n  },\r\n  methods: {\r\n    select_work: function () {\r\n      // console.log(\"test\", this.tag, this.all_works, this.works);\r\n      this.works = [];\r\n      for (const work of this.all_works) {\r\n        // console.log(work);\r\n        if (work.tag.includes(this.tag) || this.tag == null) this.works.push(work);\r\n      }\r\n    },\r\n  },\r\n  watch: {\r\n    $route: function (newVal, oldVal) {\r\n      if (newVal !== oldVal) {\r\n        this.tag = this.$route.query.tag;\r\n        this.select_work();\r\n      } else {\r\n        this.select_work();\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.tag = this.$route.query.tag;\r\n    fetch(`/works/show_list.json`)\r\n      .then((response) => {\r\n        return response.json();\r\n      })\r\n      .then((data) => {\r\n        const promises = [];\r\n        for (var i = data.from; i <= data.to; i++) {\r\n          promises.push(\r\n            fetch(`/works/${i}.json`)\r\n              .then((response) => response.json())\r\n          );\r\n        }\r\n        \r\n        Promise.all(promises).then((allWorks) => {\r\n          this.all_works = allWorks.sort((a, b) => {\r\n            const dateA = new Date(a.date.replace(/\\?/g, '1').replace('/', '-'));\r\n            const dateB = new Date(b.date.replace(/\\?/g, '1').replace('/', '-'));\r\n            return dateB - dateA;\r\n          });\r\n          this.select_work();\r\n        });\r\n      });\r\n  },\r\n  components: {\r\n    WorksComponent,\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./WorksView.vue?vue&type=template&id=47f5d3e2\"\nimport script from \"./WorksView.vue?vue&type=script&lang=js\"\nexport * from \"./WorksView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../.yarn/__virtual__/vue-loader-virtual-5e85c868fe/4/AppData/Local/Yarn/Berry/cache/vue-loader-npm-17.4.2-00674d01e5-10c0.zip/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_Fragment","_renderList","$options","groupedWorks","year","yearGroup","key","_hoisted_2","_toDisplayString","_hoisted_3","_createVNode","_component_WorksComponent","works","tag","$data","data","all_works","computed","groups","this","forEach","work","date","substring","push","Object","entries","sort","a","b","parseInt","methods","select_work","includes","watch","$route","newVal","oldVal","query","mounted","fetch","then","response","json","promises","i","from","to","Promise","all","allWorks","dateA","Date","replace","dateB","components","WorksComponent","__exports__","render"],"sourceRoot":""}