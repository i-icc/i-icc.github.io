{"version":3,"file":"js/works.b43bc270.js","mappings":"uLACQA,MAAM,a,GAQJA,MAAM,6BAA6BC,MAAA,gB,GAClCD,MAAM,S,6EATfE,EAAAA,EAAAA,IAaO,OAbPC,EAaO,cAZLC,EAAAA,EAAAA,IAKM,OAJJJ,MAAM,2BACNC,MAAA,gEACD,SAED,mBACAC,EAAAA,EAAAA,IAKMG,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAL6BC,EAAAC,aAAY,EAAjCC,EAAMC,O,WAApBR,EAAAA,EAAAA,IAKM,OAL4CS,IAAKF,EAAMT,MAAM,Q,EACjEI,EAAAA,EAAAA,IAA2E,KAA3EQ,GAA2EC,EAAAA,EAAAA,IAAZJ,GAAI,IACnEL,EAAAA,EAAAA,IAEM,MAFNU,EAEM,EADJC,EAAAA,EAAAA,IAAgDC,EAAA,CAA/BC,MAAOP,EAAYQ,IAAKC,EAAAD,K,2EAWjD,GACEE,IAAAA,GACE,MAAO,CACLC,UAAW,GACXJ,MAAO,GACPC,IAAK,KAET,EACAI,SAAU,CACRd,YAAAA,GACE,MAAMe,EAAS,CAAC,EAShB,OARAC,KAAKP,MAAMQ,QAAQC,IACjB,IAAIjB,EAAOiB,EAAKC,KAAKC,UAAU,EAAG,GACrB,SAATnB,IAAiBA,EAAO,OACvBc,EAAOd,KAAOc,EAAOd,GAAQ,IAClCc,EAAOd,GAAMoB,KAAKH,KAIbI,OAAOC,QAAQR,GACnBS,KAAK,EAAEC,IAAKC,KACD,QAAND,EAAoB,EACd,QAANC,GAAqB,EAClBC,SAASD,GAAKC,SAASF,GAEpC,GAEFG,QAAS,CACPC,YAAa,WAEXb,KAAKP,MAAQ,GACb,IAAK,MAAMS,KAAQF,KAAKH,WAElBK,EAAKR,IAAIoB,SAASd,KAAKN,MAAoB,MAAZM,KAAKN,MAAaM,KAAKP,MAAMY,KAAKH,EAEzE,GAEFa,MAAO,CACLC,OAAQ,SAAUC,EAAQC,GACpBD,IAAWC,GACblB,KAAKN,IAAMM,KAAKgB,OAAOG,MAAMzB,IAC7BM,KAAKa,eAELb,KAAKa,aAET,GAEFO,OAAAA,GACEpB,KAAKN,IAAMM,KAAKgB,OAAOG,MAAMzB,IAC7B2B,MAAM,yBACHC,KAAMC,GACEA,EAASC,QAEjBF,KAAM1B,IACL,MAAM6B,EAAW,GACjB,IAAK,IAAIC,EAAI9B,EAAK+B,KAAMD,GAAK9B,EAAKgC,GAAIF,IACpCD,EAASpB,KACPgB,MAAM,UAAUK,UACbJ,KAAMC,GAAaA,EAASC,SAInCK,QAAQC,IAAIL,GAAUH,KAAMS,IAC1B/B,KAAKH,UAAYkC,EAASvB,KAAK,CAACC,EAAGC,KACjC,MAAMsB,EAAQ,IAAIC,KAAKxB,EAAEN,KAAK+B,QAAQ,MAAO,KAAKA,QAAQ,IAAK,MACzDC,EAAQ,IAAIF,KAAKvB,EAAEP,KAAK+B,QAAQ,MAAO,KAAKA,QAAQ,IAAK,MAC/D,OAAOC,EAAQH,IAEjBhC,KAAKa,iBAGb,EACAuB,WAAY,CACVC,eAAcA,EAAAA,I,UC1FlB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://i-icc/./src/views/WorksView.vue","webpack://i-icc/./src/views/WorksView.vue?cbe5"],"sourcesContent":["<template>\n  <main class=\"container\">\n    <div\n      class=\"text-lg-center mb-4 mt-2\"\n      style=\"font-size: 4rem; font-family: 'Kosugi Maru', sans-serif\"\n    >\n      制作物\n    </div>\n    <div v-for=\"([year, yearGroup]) in groupedWorks\" :key=\"year\" class=\"mb-5\">\n      <h2 class=\"display-5 mb-3 text-center\" style=\"color: #666;\">{{ year }}</h2>\n      <div class=\"works\">\n        <WorksComponent :works=\"yearGroup\" :tag=\"tag\" />\n      </div>\n    </div>\n  </main>\n</template>\n\n<script>\nimport WorksComponent from \"@/components/WorksComponent.vue\";\n\nimport \"../../public/css/works.css\";\n\nexport default {\n  data() {\n    return {\n      all_works: [],\n      works: [],\n      tag: null,\n    };\n  },\n  computed: {\n    groupedWorks() {\n      const groups = {};\n      this.works.forEach(work => {\n        let year = work.date.substring(0, 4);\n        if (year === '????') year = '年不明';\n        if (!groups[year]) groups[year] = [];\n        groups[year].push(work);\n      });\n\n      // 配列で返すことで順序を保証\n      return Object.entries(groups)\n        .sort(([a], [b]) => {\n          if (a === '年不明') return 1;\n          if (b === '年不明') return -1;\n          return parseInt(b) - parseInt(a); // 新しい年が上\n        });\n    }\n  },\n  methods: {\n    select_work: function () {\n      // console.log(\"test\", this.tag, this.all_works, this.works);\n      this.works = [];\n      for (const work of this.all_works) {\n        // console.log(work);\n        if (work.tag.includes(this.tag) || this.tag == null) this.works.push(work);\n      }\n    },\n  },\n  watch: {\n    $route: function (newVal, oldVal) {\n      if (newVal !== oldVal) {\n        this.tag = this.$route.query.tag;\n        this.select_work();\n      } else {\n        this.select_work();\n      }\n    },\n  },\n  mounted() {\n    this.tag = this.$route.query.tag;\n    fetch(`/works/show_list.json`)\n      .then((response) => {\n        return response.json();\n      })\n      .then((data) => {\n        const promises = [];\n        for (var i = data.from; i <= data.to; i++) {\n          promises.push(\n            fetch(`/works/${i}.json`)\n              .then((response) => response.json())\n          );\n        }\n        \n        Promise.all(promises).then((allWorks) => {\n          this.all_works = allWorks.sort((a, b) => {\n            const dateA = new Date(a.date.replace(/\\?/g, '1').replace('/', '-'));\n            const dateB = new Date(b.date.replace(/\\?/g, '1').replace('/', '-'));\n            return dateB - dateA;\n          });\n          this.select_work();\n        });\n      });\n  },\n  components: {\n    WorksComponent,\n  },\n};\n</script>\n","import { render } from \"./WorksView.vue?vue&type=template&id=47f5d3e2\"\nimport script from \"./WorksView.vue?vue&type=script&lang=js\"\nexport * from \"./WorksView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../.yarn/__virtual__/vue-loader-virtual-5e85c868fe/3/.yarn/berry/cache/vue-loader-npm-17.4.2-00674d01e5-10c0.zip/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","style","_createElementBlock","_hoisted_1","_createElementVNode","_Fragment","_renderList","$options","groupedWorks","year","yearGroup","key","_hoisted_2","_toDisplayString","_hoisted_3","_createVNode","_component_WorksComponent","works","tag","$data","data","all_works","computed","groups","this","forEach","work","date","substring","push","Object","entries","sort","a","b","parseInt","methods","select_work","includes","watch","$route","newVal","oldVal","query","mounted","fetch","then","response","json","promises","i","from","to","Promise","all","allWorks","dateA","Date","replace","dateB","components","WorksComponent","__exports__","render"],"sourceRoot":""}